<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ProveedorXpress</title>
  <link rel="icon" href="./assets/a.png" type="image/png" />
  
  <style>
    /* Estilos b√°sicos para que funcione sin CSS externos */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
    }
    
    h1 {
      text-align: center;
      color: #333;
    }
    
    #subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
    }
    
    #productos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .producto {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    
    .producto img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .producto h2 {
      color: #333;
      margin: 10px 0;
      font-size: 1.2em;
    }
    
    .precio {
      margin: 15px 0;
    }
    
    .tachado {
      text-decoration: line-through;
      color: #999;
      margin-right: 10px;
    }
    
    .nuevo {
      color: #e74c3c;
      font-weight: bold;
      font-size: 1.3em;
    }
    
    .agregar {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s;
    }
    
    .agregar:hover {
      background: #2980b9;
    }
    
    /* Modal styles */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .modal-overlay.activo {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
    }
    
    .modal-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    
    .cerrar-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      font-size: 30px;
      cursor: pointer;
      color: #999;
    }
    
    .modal-flex {
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }
    
    .modal-img {
      flex: 1;
    }
    
    .modal-img img {
      width: 100%;
      border-radius: 10px;
    }
    
    .modal-info {
      flex: 1;
    }
    
    .precio-modal {
      margin: 20px 0;
    }
    
    .precio-nueva {
      font-size: 2em;
      color: #e74c3c;
      font-weight: bold;
      margin-right: 15px;
    }
    
    .precio-original {
      text-decoration: line-through;
      color: #999;
      margin-right: 10px;
    }
    
    .descuento {
      background: #e74c3c;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.9em;
    }
    
    .customer-info {
      margin: 25px 0;
    }
    
    .customer-info h4 {
      margin-bottom: 10px;
      color: #333;
    }
    
    #customerEmail {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
    }
    
    .cantidad-box {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
    }
    
    .cantidad-btn {
      background: #3498db;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2em;
    }
    
    .cantidad-display {
      font-size: 1.5em;
      font-weight: bold;
      min-width: 30px;
      text-align: center;
    }
    
    .info-instantaneo {
      background: #2ecc71;
      color: white;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      margin: 20px 0;
    }
    
    /* Cookie Modal */
    .cookie-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cookie-modal {
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .terms-list {
      text-align: left;
      margin: 20px 0;
    }
    
    .terms-list li {
      margin: 10px 0;
      padding-left: 10px;
    }
    
    .highlight {
      font-weight: bold;
      color: #e74c3c;
    }
    
    .checkbox-container {
      margin: 20px 0;
      text-align: center;
    }
    
    .cookie-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    .btn-accept, .btn-decline {
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }
    
    .btn-accept {
      background: #95a5a6;
      color: white;
    }
    
    .btn-accept:not(:disabled) {
      background: #27ae60;
    }
    
    .btn-decline {
      background: #e74c3c;
      color: white;
    }
    
    /* Confirmaci√≥n */
    .confirmacion {
      text-align: center;
    }
    
    .checkmark {
      margin: 20px 0;
    }
    
    .confirmacion-detalles {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      text-align: left;
    }
    
    .info-envio {
      background: #d4edda;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
    }
    
    .btn-cerrar {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }

    /* Comparison section */
    .comparison-section {
      max-width: 1200px;
      margin: 50px auto;
      padding: 40px 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .comparison-title {
      text-align: center;
      color: #333;
      margin-bottom: 40px;
      font-size: 2em;
    }

    .comparison-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .comparison-column {
      padding: 30px;
      border-radius: 10px;
    }

    .nosotros {
      background: linear-gradient(135deg, #27ae60, #2ecc71);
      color: white;
    }

    .otros {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: white;
    }

    .comparison-column h3 {
      text-align: center;
      font-size: 1.5em;
      margin-bottom: 25px;
    }

    .comparison-list {
      list-style: none;
      padding: 0;
    }

    .comparison-item {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
    }

    .comparison-item .icon {
      font-size: 1.5em;
      margin-right: 15px;
    }

    /* Reviews section */
    .reviews-section {
      max-width: 1200px;
      margin: 50px auto;
      padding: 40px 20px;
    }

    .reviews-title {
      text-align: center;
      color: #333;
      margin-bottom: 40px;
      font-size: 2em;
    }

    .reviews-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 25px;
    }

    .review-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #3498db;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2em;
    }

    .user-name {
      margin: 0;
      color: #333;
      font-size: 1.1em;
    }

    .stars {
      color: #f39c12;
      margin-top: 5px;
    }

    .product-purchased img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
    }

    .review-content p {
      color: #555;
      line-height: 1.6;
      margin: 15px 0;
    }

    .review-date {
      color: #999;
      font-size: 0.9em;
    }
    
    @media (max-width: 768px) {
      .modal-flex {
        flex-direction: column;
      }
      
      #productos {
        grid-template-columns: 1fr;
      }

      .comparison-container {
        grid-template-columns: 1fr;
      }

      .reviews-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Modal de t√©rminos y condiciones -->
  <div id="cookieOverlay" class="cookie-overlay">
    <div class="cookie-modal">
      <h2>T√©rminos y Condiciones de ProveedorXpress</h2>
      <p>Por favor, lee y acepta nuestros t√©rminos para continuar:</p>
      
      <ul class="terms-list">
        <li>‚úÖ Los datos de proveedores son <span class="highlight">100% reales y verificados</span></li>
        <li>üìß La informaci√≥n se env√≠a <span class="highlight">instant√°neamente</span> a tu email</li>
        <li>üîí Tu informaci√≥n personal est√° <span class="highlight">completamente protegida</span></li>
        <li>üí∞ Pago seguro procesado por <span class="highlight">PayPal</span></li>
        <li>üìã Los proveedores incluyen: contactos, precios, condiciones y t√©rminos</li>
        <li>üö´ <span class="highlight">No reembolsos</span> una vez enviada la informaci√≥n</li>
        <li>‚öñÔ∏è Al comprar, aceptas todos estos t√©rminos autom√°ticamente</li>
      </ul>
      
      <div class="checkbox-container">
        <label>
          <input type="checkbox" id="acceptTerms"> 
          He le√≠do y acepto los t√©rminos y condiciones
        </label>
      </div>
      
      <div class="cookie-buttons">
        <button id="acceptBtn" class="btn-accept" disabled>Aceptar y Continuar</button>
        <button id="declineBtn" class="btn-decline">Rechazar y Salir</button>
      </div>
    </div>
  </div>

  <!-- Modal del producto -->
  <div id="modalProveedor" class="modal-overlay">
    <!-- Contenido se inyecta din√°micamente -->
  </div>

  <h1>ProveedorXpress</h1>
  <p id="subtitle">Consigue los datos de contacto de los proveedores m√°s confiables de tu sector. Servicio r√°pido y seguro.</p>
  
  <main id="productos">
    <!-- Se inyectan los productos -->
  </main>

  <!-- Secci√≥n de Comparaci√≥n -->
  <section class="comparison-section">
    <h2 class="comparison-title">¬øPor qu√© elegir ProveedorXpress?</h2>
    <div class="comparison-container">
      <div class="comparison-column nosotros">
        <h3>ProveedorXpress ‚úÖ</h3>
        <ul class="comparison-list">
          <li class="comparison-item">
            <span class="icon">‚ö°</span>
            <span class="text">Informaci√≥n enviada <strong>instant√°neamente</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">‚úÖ</span>
            <span class="text">Proveedores <strong>verificados</strong> y confiables</span>
          </li>
          <li class="comparison-item">
            <span class="icon">üí∞</span>
            <span class="text">Precios <strong>competitivos</strong> garantizados</span>
          </li>
          <li class="comparison-item">
            <span class="icon">üîí</span>
            <span class="text">Pago <strong>100% seguro</strong> con PayPal</span>
          </li>
          <li class="comparison-item">
            <span class="icon">üìß</span>
            <span class="text">Soporte <strong>24/7</strong> por email</span>
          </li>
          <li class="comparison-item">
            <span class="icon">üéØ</span>
            <span class="text">Informaci√≥n <strong>espec√≠fica</strong> por categor√≠a</span>
          </li>
        </ul>
      </div>
      
      <div class="comparison-column otros">
        <h3>Otros servicios ‚ùå</h3>
        <ul class="comparison-list">
          <li class="comparison-item">
            <span class="icon">‚è≥</span>
            <span class="text">Demoras de <strong>d√≠as o semanas</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">‚ùì</span>
            <span class="text">Proveedores <strong>sin verificar</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">üí∏</span>
            <span class="text">Precios <strong>inflados</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">‚ö†Ô∏è</span>
            <span class="text">M√©todos de pago <strong>inseguros</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">üìû</span>
            <span class="text">Soporte <strong>limitado</strong></span>
          </li>
          <li class="comparison-item">
            <span class="icon">üìã</span>
            <span class="text">Informaci√≥n <strong>gen√©rica</strong></span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Secci√≥n de Rese√±as -->
  <section class="reviews-section">
    <h2 class="reviews-title">Lo que dicen nuestros clientes</h2>
    
    <div class="reviews-container">
      <!-- Rese√±a 1 -->
      <div class="review-card">
        <div class="review-header">
          <div class="user-info">
            <div class="user-avatar">M</div>
            <div class="user-details">
              <h4 class="user-name">Mar√≠a Gonz√°lez</h4>
              <div class="stars">
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
              </div>
            </div>
          </div>
          <div class="product-purchased">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiByeD0iOCIgZmlsbD0iIzNBNEY3QSIvPgo8cGF0aCBkPSJNMTUgMjBIMzBWMzVIMTVWMjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMzUgMjBINDVWMzVIMzVWMjBaIiBmaWxsPSJ3aGl0ZSIvPgo8dGV4dCB4PSIzMCIgeT0iNDgiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI4IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Um9wYTwvdGV4dD4KPC9zdmc+" alt="Proveedor de ropa" class="product-image">
          </div>
        </div>
        <div class="review-content">
          <p>"Incre√≠ble servicio! Los proveedores de ropa que me enviaron son exactamente lo que necesitaba para mi negocio. Calidad excepcional y precios competitivos. 100% recomendado!"</p>
        </div>
        <div class="review-date">Hace 2 d√≠as</div>
      </div>

      <!-- Rese√±a 2 -->
      <div class="review-card">
        <div class="review-header">
          <div class="user-info">
            <div class="user-avatar">A</div>
            <div class="user-details">
              <h4 class="user-name">Alejandro Ruiz</h4>
              <div class="stars">
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
              </div>
            </div>
          </div>
          <div class="product-purchased">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiByeD0iOCIgZmlsbD0iIzJFOEI1NyIvPgo8Y2lyY2xlIGN4PSIzMCIgY3k9IjI1IiByPSI4IiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIyNSIgeT0iMzUiIHdpZHRoPSIxMCIgaGVpZ2h0PSI4IiBmaWxsPSJ3aGl0ZSIvPgo8dGV4dCB4PSIzMCIgeT0iNTIiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI3IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RWxlY3Ryb248L3RleHQ+CjwvZz4KPC9zdmc+" alt="Proveedor electr√≥nica" class="product-image">
          </div>
        </div>
        <div class="review-content">
          <p>"Fant√°stico! Me llegaron los contactos de proveedores de electr√≥nica al instante. Ya he cerrado mi primer pedido con uno de ellos. El servicio es r√°pido y profesional."</p>
        </div>
        <div class="review-date">Hace 1 semana</div>
      </div>

      <!-- Rese√±a 3 -->
      <div class="review-card">
        <div class="review-header">
          <div class="user-info">
            <div class="user-avatar">L</div>
            <div class="user-details">
              <h4 class="user-name">Laura Mart√≠n</h4>
              <div class="stars">
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
                <span class="star">‚≠ê</span>
              </div>
            </div>
          </div>
          <div class="product-purchased">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiByeD0iOCIgZmlsbD0iI0Y1OUUwQiIvPgo8cmVjdCB4PSIxNSIgeT0iMTUiIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgcng9IjQiIGZpbGw9IndoaXRlIi8+Cjx0ZXh0IHg9IjMwIiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjRjU5RTBCIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5QQUNLPC90ZXh0Pgo8dGV4dCB4PSIzMCIgeT0iNTIiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI3IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Q29tcGxldG88L3RleHQ+Cjwvc3ZnPg==" alt="Pack completo" class="product-image">
          </div>
        </div>
        <div class="review-content">
          <p>"Compr√© el pack completo y ha sido la mejor inversi√≥n para mi dropshipping. Tengo proveedores para todo tipo de productos. ¬°S√∫per recomendado!"</p>
        </div>
        <div class="review-date">Hace 3 d√≠as</div>
      </div>
    </div>
  </section>

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=AafE6Irt7GkUphXF4HsdjziTlFI4SvOy9P6_UKt60RoU77bvN2__PJ3q8A8l6QnecuTCZj95krzsC6zJ&currency=EUR"></script>
  
  <script>
    // Array de productos
    const productos = [
      { id: 'ropa', nombre: 'Proveedor de ropa', img: 'assets/ropa.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'vapers', nombre: 'Proveedor vapers', img: 'assets/vapers.jpg'precioOrig: 19.99, precioSale: 9.99 },
      { id: 'vapers', nombre: 'Proveedor vapers', img: 'assets/vapers.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'zapas', nombre: 'Proveedor zapas', img: 'assets/zapas.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'vintage', nombre: 'Proveedor ropa vintage', img: 'assets/ropa_vintage.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'facturas', nombre: 'Proveedor facturas editables', img: 'assets/facturas.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'futbol', nombre: 'Proveedor f√∫tbol', img: 'assets/futbol.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'relojes', nombre: 'Proveedor relojes', img: 'assets/relojes.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'accesorios', nombre: 'Proveedor accesorios', img: 'assets/accesorios.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'electronica', nombre: 'Proveedor electr√≥nica', img: 'assets/electronica.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'tickets', nombre: 'Tickets', img: 'assets/tickets.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'perfumes', nombre: 'Proveedor perfumes', img: 'assets/perfumes.jpg', precioOrig: 19.99, precioSale: 9.99 },
      { id: 'Iphones', nombre: 'Proveedor iPhone 15/16 Pro Max', img: 'assets/Iphones.jpg', precioOrig: 10, precioSale: 9.99 },
      { id: 'Bolsos', nombre: 'Proveedor Bolsos LV', img: 'assets/bolsosLV.jpg', precioOrig: 20, precioSale: 13.99 },
      { id: 'DenimTears', nombre: 'Proveedor Denim Tears:', img: 'assets/DenimTears.jpg', precioOrig: 10, precioSale: 9.99 },
      { id: 'PulseraLV', nombre: 'Proveedor Pulsera LV', img: 'assets/PulseraLV.jpg', precioOrig: 10, precioSale: 9.99 },
      { id: 'Sp5der', nombre: 'Proveedor Sp5der', img: 'assets/Sp5der.jpg', precioOrig: 10, precioSale: 9.99 },
      { id: 'JOYASCONDIAMANTEMOISSANITE', nombre: 'Proveedor JOYAS CON DIAMANTE (MOISSANITE)', img: 'assets/JOYASCONDIAMANTEMOISSANITE.jpg', precioOrig: 10, precioSale: 9.99 },
      { id: 'pack-completo', nombre: 'Pack completo de todos los proveedores', img: 'assets/pack.jpg', precioOrig: 99.99, precioSale: 50 },
      { id: 'pack-aleatorio', nombre: 'Pack aleatorio de varios proveedores', img: 'assets/PackRND.jpg', precioOrig: 39.99, precioSale: 19.99 },
      
    ];

    // Variables globales
    let currentOrder = null;

    // Funci√≥n para renderizar productos
    function renderProductos() {
      const productosContainer = document.getElementById('productos');
      productosContainer.innerHTML = "";
      
      productos.forEach(p => {
        const art = document.createElement('article');
        art.className = 'producto';
        art.dataset.id = p.id;
        art.innerHTML = `
          <img src="${p.img}" alt="${p.nombre}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg=='">
          <h2>${p.nombre}</h2>
          <div class="precio">
            <span class="tachado">${p.precioOrig}‚Ç¨</span>
            <span class="nuevo">${p.precioSale}‚Ç¨</span>
          </div>
          <button class="agregar" data-id="${p.id}">Agregar al carrito</button>
        `;
        productosContainer.appendChild(art);
      });
    }

    // Funci√≥n para abrir modal del proveedor
    function abrirModalProveedor(prod, cantidad = 1) {
      const modal = document.getElementById('modalProveedor');
      modal.innerHTML = `
        <div class="modal-content">
          <button class="cerrar-modal" onclick="cerrarModal()">&times;</button>
          <div class="modal-flex">
            <div class="modal-img">
              <img src="${prod.img}" alt="${prod.nombre}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg=='>
            </div>
            <div class="modal-info">
              <h2>${prod.nombre}</h2>
              <div class="precio-modal">
                <span class="precio-nueva">${prod.precioSale.toFixed(2)}‚Ç¨</span>
                <span class="precio-original">${prod.precioOrig.toFixed(2)}‚Ç¨</span>
                <span class="descuento">AHORRA ${Math.round(100 - (prod.precioSale / prod.precioOrig) * 100)}%</span>
              </div>
              
              <div class="customer-info">
                <h4>üìß Tu email para recibir la informaci√≥n:</h4>
                <input type="email" id="customerEmail" placeholder="tu-email@ejemplo.com" required>
              </div>
              
              <div class="cantidad-box">
                <button class="cantidad-btn" onclick="cambiarCantidad(-1)">-</button>
                <span class="cantidad-display" id="cantidadSpan">${cantidad}</span>
                <button class="cantidad-btn" onclick="cambiarCantidad(1)">+</button>
                <span class="mini">(Cantidad)</span>
              </div>
              
              <div class="info-instantaneo">‚ö° Informaci√≥n enviada al instante</div>
              <div id="paypal-modal-btn"></div>
            </div>
          </div>
        </div>
      `;
      
      modal.classList.add('activo');
      
      // Configurar la cantidad actual
      window.cantidadActual = cantidad;
      window.productoActual = prod;
      
      // Renderizar PayPal
      renderPayPalBtn();
      
      // Event listener para el email
      document.getElementById('customerEmail').addEventListener('input', renderPayPalBtn);
    }

    // Funci√≥n para cambiar cantidad
    function cambiarCantidad(delta) {
      window.cantidadActual = Math.max(1, window.cantidadActual + delta);
      document.getElementById('cantidadSpan').textContent = window.cantidadActual;
      renderPayPalBtn();
    }

    // Funci√≥n para renderizar bot√≥n PayPal
    function renderPayPalBtn() {
      const cont = document.getElementById('paypal-modal-btn');
      if (!cont) return;
      
      cont.innerHTML = "";
      
      if (window.paypal && window.productoActual) {
        paypal.Buttons({
          style: { 
            layout: 'vertical', 
            color: 'gold',
            shape: 'rect',
            label: 'pay'
          },
          createOrder: function(data, actions) {
            const emailInput = document.getElementById('customerEmail');
            const email = emailInput ? emailInput.value.trim() : '';
            
            if (!email || !email.includes('@')) {
              alert('Por favor, introduce un email v√°lido para recibir la informaci√≥n del proveedor.');
              return Promise.reject(new Error('Email no v√°lido'));
            }

            const prod = window.productoActual;
            const cantidad = window.cantidadActual;

            currentOrder = {
              producto: prod.nombre,
              producto_id: prod.id,
              cantidad: cantidad,
              email_cliente: email,
              precio_unitario: prod.precioSale,
              precio_total: (prod.precioSale * cantidad).toFixed(2),
              fecha: new Date().toISOString()
            };

            return actions.order.create({
              purchase_units: [{
                amount: { 
                  currency_code: 'EUR', 
                  value: (prod.precioSale * cantidad).toFixed(2) 
                },
                description: `${prod.nombre} - Cantidad: ${cantidad}`
              }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              console.log('Pago completado:', details);
              mostrarConfirmacionPago(currentOrder);
            });
          },
          onError: function(err) {
            console.error('Error en el pago:', err);
            alert('Hubo un error al procesar el pago. Por favor, int√©ntalo de nuevo.');
          },
          onCancel: function(data) {
            console.log('Pago cancelado:', data);
            alert('Pago cancelado. Puedes intentarlo de nuevo cuando quieras.');
          }
        }).render('#paypal-modal-btn');
      }
    }

    // Funci√≥n para mostrar confirmaci√≥n
    function mostrarConfirmacionPago(orderInfo) {
      const modal = document.getElementById('modalProveedor');
      modal.innerHTML = `
        <div class="modal-content confirmacion">
          <div class="checkmark">
            <svg width="100" height="100" viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="45" fill="#4CAF50"/>
              <path d="M25 50 L40 65 L75 30" stroke="white" stroke-width="5" fill="none"/>
            </svg>
          </div>
          <h2>¬°Pago completado con √©xito!</h2>
          <div class="confirmacion-detalles">
            <p><strong>Producto:</strong> ${orderInfo.producto}</p>
            <p><strong>Cantidad:</strong> ${orderInfo.cantidad}</p>
            <p><strong>Total:</strong> ${orderInfo.precio_total}‚Ç¨</p>
            <p><strong>Email:</strong> ${orderInfo.email_cliente}</p>
          </div>
          <div class="info-envio">
            <p>üìß La informaci√≥n del proveedor ser√° enviada a tu email en los pr√≥ximos minutos.</p>
            <p>‚ö° ¬°Gracias por tu compra!</p>
          </div>
          <button class="btn-cerrar" onclick="cerrarModal()">Cerrar</button>
        </div>
      `;
      
      setTimeout(() => cerrarModal(), 5000);
    }

    // Funci√≥n para cerrar modal
    function cerrarModal() {
      const modal = document.getElementById('modalProveedor');
      modal.classList.remove('activo');
      setTimeout(() => {
        modal.innerHTML = "";
      }, 300);
    }

    // Event listeners principales
    document.addEventListener('DOMContentLoaded', function() {
      // Manejar t√©rminos y condiciones
      const overlay = document.getElementById('cookieOverlay');
      const checkbox = document.getElementById('acceptTerms');
      const acceptBtn = document.getElementById('acceptBtn');
      const declineBtn = document.getElementById('declineBtn');
      
      // Verificar si ya se aceptaron los t√©rminos
      const termsAccepted = sessionStorage.getItem('termsAccepted') === 'true';
      if (termsAccepted) {
        overlay.style.display = 'none';
      }
      
      // Checkbox handler
      checkbox.addEventListener('change', function() {
        acceptBtn.disabled = !checkbox.checked;
      });
      
      // Bot√≥n aceptar
      acceptBtn.addEventListener('click', function() {
        if (checkbox.checked) {
          sessionStorage.setItem('termsAccepted', 'true');
          overlay.style.display = 'none';
        }
      });
      
      // Bot√≥n rechazar
      declineBtn.addEventListener('click', function() {
        if (confirm('¬øEst√°s seguro de que quieres salir?')) {
          window.location.href = 'https://www.google.com';
        }
      });

      // Renderizar productos
      renderProductos();
      
      // Event listener para botones de productos
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('agregar')) {
          const productId = e.target.dataset.id;
          const producto = productos.find(p => p.id === productId);
          if (producto) {
            abrirModalProveedor(producto);
          }
        }
      });

      // Cerrar modal al hacer clic fuera
      document.getElementById('modalProveedor').addEventListener('click', function(e) {
        if (e.target === this) {
          cerrarModal();
        }
      });
    });
  </script>
</body>
</html>
