<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ProveedorXpress</title>
<style>
  body {
    background: #f9f9f9;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    color: #222;
  }
  h1 {
    text-align: center;
    margin: 1.5rem 0;
    color: #cc9900;
    font-weight: 900;
  }
  main {
    max-width: 1200px;
    margin: auto;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    padding: 0 1rem 3rem;
  }
  article.producto {
    background: white;
    border-radius: 16px;
    box-shadow: 0 8px 25px rgba(204 153 0 / 0.2);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  article.producto:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 35px rgba(204 153 0 / 0.4);
  }
  article.producto img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-bottom: 2px solid #cc9900;
  }
  article.producto h2 {
    font-size: 1.3rem;
    margin: 1rem;
    color: #333;
    flex-grow: 1;
  }
  .precio {
    text-align: center;
    margin: 0 1rem 1rem;
    font-size: 1.3rem;
  }
  .precio .tachado {
    text-decoration: line-through;
    color: #999;
    margin-right: 0.8rem;
    font-weight: 600;
  }
  .precio .nuevo {
    color: #cc9900;
    font-weight: 900;
  }
  button.agregar {
    margin: 0 1.5rem 1.5rem;
    padding: 0.8rem 0;
    border: none;
    background-color: #cc9900;
    color: white;
    font-weight: 700;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 6px 15px rgba(204 153 0 / 0.5);
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  button.agregar:hover {
    background-color: #b27f00;
    transform: scale(1.05);
  }

  #btnCarrito {
    position: fixed;
    right: 25px;
    bottom: 25px;
    background-color: #cc9900;
    color: white;
    padding: 1rem 1.7rem;
    border-radius: 30px;
    font-size: 1.6rem;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(204 153 0 / 0.6);
    z-index: 2000;
    border: none;
    transition: background-color 0.3s ease;
  }
  #btnCarrito:hover {
    background-color: #b27f00;
  }

  #carrito {
    position: fixed;
    top: 0;
    right: -450px;
    width: 400px;
    height: 100vh;
    background: white;
    box-shadow: -8px 0 40px rgba(0,0,0,0.15);
    padding: 2rem 2rem 3rem;
    display: flex;
    flex-direction: column;
    transition: right 0.4s cubic-bezier(0.4,0,0.2,1);
    z-index: 2100;
  }
  #carrito.visible {
    right: 0;
  }
  #carrito header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }
  #carrito header h3 {
    font-size: 2rem;
    font-weight: 900;
    color: #cc9900;
    letter-spacing: 0.05em;
  }
  #carrito header button.cerrar {
    background: none;
    border: none;
    font-size: 2.6rem;
    color: #999;
    cursor: pointer;
    transition: color 0.3s ease;
  }
  #carrito header button.cerrar:hover {
    color: #cc9900;
  }
  #carrito ul {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 0.5rem;
    list-style: none;
    margin-bottom: 1.5rem;
  }
  #carrito ul::-webkit-scrollbar {
    width: 6px;
  }
  #carrito ul::-webkit-scrollbar-thumb {
    background: #cc9900;
    border-radius: 3px;
  }
  #carrito ul li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #eee;
    padding: 0.6rem 0;
  }
  #carrito ul li span.nombre {
    flex: 1 1 140px;
    font-weight: 700;
    color: #222;
  }
  #carrito ul li input.cantidad {
    width: 50px;
    border: 1.8px solid #ccc;
    border-radius: 8px;
    font-size: 1rem;
    text-align: center;
    margin: 0 0.8rem;
    padding: 0.2rem 0.4rem;
  }
  #carrito ul li span.precio {
    font-weight: 900;
    color: #cc9900;
    min-width: 60px;
    text-align: right;
  }
  #carrito ul li button.eliminar {
    background: none;
    border: none;
    font-size: 1.7rem;
    color: #cc9900;
    cursor: pointer;
    font-weight: 900;
    transition: color 0.3s ease;
    margin-left: 10px;
  }
  #carrito ul li button.eliminar:hover {
    color: #b27f00;
  }
  #carrito .total {
    font-weight: 900;
    font-size: 1.6rem;
    color: #222;
    text-align: right;
    border-top: 3px solid #cc9900;
    padding-top: 1rem;
    margin-bottom: 1rem;
  }
  #carrito .paypal-container {
    margin-top: auto;
  }
  @media (max-width: 950px) {
    main {
      grid-template-columns: repeat(2, 1fr);
    }
    #carrito {
      width: 100vw;
      max-width: 400px;
    }
  }
  @media (max-width: 600px) {
    main {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>

<h1>ProveedorXpress</h1>

<main id="productos">
  <!-- Se inyectan 12 proveedores + 2 packs -->
</main>

<button id="btnCarrito" aria-label="Abrir carrito">ðŸ›’ Carrito</button>

<aside id="carrito" aria-label="Carrito de compras" role="region" aria-live="polite">
  <header>
    <h3>Tu carrito</h3>
    <button class="cerrar" id="cerrarCarrito" aria-label="Cerrar carrito">&times;</button>
  </header>
  <ul id="listaCarrito"></ul>
  <div class="total" id="total">Total: 0â‚¬</div>
  <div class="paypal-container" id="paypal-button-container"></div>
</aside>

<!-- PayPal SDK con tu Client ID -->
<script src="https://www.paypal.com/sdk/js?client-id=AaB66xFftPZMR4JyEunStmiuR-TmzvIQPmM12pKow5BdeKCrPrpQz5U919rhC7ea7zmFn5c-c0GW5Dhx&currency=EUR"></script>
<script>
  // Lista de productos
  const productos = [
    { id:'ropa', nombre:'Proveedor de ropa', img:'ropa.jpg', precioOrig:20, precioSale:10 },
    { id:'vapers', nombre:'Proveedor vapers', img:'vapers.jpg', precioOrig:20, precioSale:10 },
    { id:'zapas', nombre:'Proveedor zapas', img:'zapas.jpg', precioOrig:20, precioSale:10 },
    { id:'vintage', nombre:'Proveedor ropa vintage', img:'vintage.jpg', precioOrig:20, precioSale:10 },
    { id:'facturas', nombre:'Proveedor facturas editables', img:'facturas.jpg', precioOrig:20, precioSale:10 },
    { id:'futbol', nombre:'Proveedor fÃºtbol', img:'futbol.jpg', precioOrig:20, precioSale:10 },
    { id:'relojes', nombre:'Proveedor relojes', img:'relojes.jpg', precioOrig:20, precioSale:10 },
    { id:'accesorios', nombre:'Proveedor accesorios', img:'accesorios.jpg', precioOrig:20, precioSale:10 },
    { id:'electronica', nombre:'Proveedor electrÃ³nica', img:'electronica.jpg', precioOrig:20, precioSale:10 },
    { id:'tickets', nombre:'Tickets', img:'tickets.jpg', precioOrig:20, precioSale:10 },
    { id:'perfumes', nombre:'Proveedor perfumes', img:'perfumes.jpg', precioOrig:20, precioSale:10 },
    { id:'pack-completo', nombre:'Pack completo de todos los proveedores', img:'pack.jpg', precioOrig:100, precioSale:50 },
    { id:'pack-aleatorio', nombre:'Pack aleatorio de varios proveedores', img:'aleatorios.jpg', precioOrig:40, precioSale:20 }
  ];

  const productosContainer = document.getElementById('productos');
  const carritoBtn = document.getElementById('btnCarrito');
  const carrito = document.getElementById('carrito');
  const cerrarCarrito = document.getElementById('cerrarCarrito');
  const listaCarrito = document.getElementById('listaCarrito');
  const totalSpan = document.getElementById('total');

  // Estado del carrito
  let carritoItems = {};

  // Renderizar productos en el DOM
  productos.forEach(p => {
    const art = document.createElement('article');
    art.className = 'producto';
    art.dataset.id = p.id;
    art.innerHTML = `
      <img src="${p.img}" alt="${p.nombre}">
      <h2>${p.nombre}</h2>
      <div class="precio">
        <span class="tachado">${p.precioOrig}â‚¬</span>
        <span class="nuevo">${p.precioSale}â‚¬</span>
      </div>
      <button class="agregar">AÃ±adir al carrito</button>
    `;
    productosContainer.appendChild(art);
  });

  // Mostrar/ocultar carrito
  carritoBtn.addEventListener('click', () => {
    carrito.classList.add('visible');
  });
  cerrarCarrito.addEventListener('click', () => {
    carrito.classList.remove('visible');
  });

  // AÃ±adir productos al carrito
  document.querySelectorAll('button.agregar').forEach(btn => {
    btn.addEventListener('click', e => {
      const art = e.target.closest('article');
      const id = art.dataset.id;
      const prod = productos.find(x => x.id === id);
      if (!carritoItems[id]) {
        carritoItems[id] = { nombre: prod.nombre, precio: prod.precioSale, cantidad: 1 };
      } else {
        carritoItems[id].cantidad++;
      }
      renderCarrito();
      carrito.classList.add('visible');
    });
  });

  // Renderizar carrito
  function renderCarrito() {
    listaCarrito.innerHTML = '';
    let total = 0;
    Object.keys(carritoItems).forEach(id => {
      const item = carritoItems[id];
      total += item.precio * item.cantidad;
      const li = document.createElement('li');
      li.innerHTML = `
        <span class="nombre">${item.nombre}</span>
        <input type="number" class="cantidad" min="1" value="${item.cantidad}" data-id="${id}">
        <span class="precio">${(item.precio * item.cantidad).toFixed(2)}â‚¬</span>
        <button class="eliminar" data-id="${id}">&times;</button>
      `;
      listaCarrito.appendChild(li);

      // Control cantidad
      li.querySelector('input.cantidad').addEventListener('change', e => {
        let val = parseInt(e.target.value);
        if (isNaN(val) || val < 1) val = 1;
        carritoItems[id].cantidad = val;
        renderCarrito();
      });

      // BotÃ³n eliminar
      li.querySelector('button.eliminar').addEventListener('click', () => {
        delete carritoItems[id];
        renderCarrito();
      });
    });
    totalSpan.textContent = `Total: ${total.toFixed(2)}â‚¬`;
    renderPayPalButton(total);
  }

  // Renderizar botÃ³n PayPal en carrito
  function renderPayPalButton(total) {
    document.getElementById('paypal-button-container')?.remove();
    const container = document.createElement('div');
    container.id = 'paypal-button-container';
    container.style.marginTop = 'auto';
    carrito.appendChild(container);

    paypal.Buttons({
      style: { layout: 'vertical', color: 'gold', shape: 'rect', label: 'paypal' },
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: { currency_code: 'EUR', value: total.toFixed(2) }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(details => {
          alert(`Gracias por tu compra, ${details.payer.name.given_name}!`);
          carritoItems = {};
          renderCarrito();
          carrito.classList.remove('visible');
        });
      },
      onError: function(err) {
        console.error(err);
        alert('Error al procesar el pago. IntÃ©ntalo de nuevo.');
      }
    }).render('#paypal-button-container');
  }

  // Inicializar carrito vacÃ­o
  renderCarrito();
</script>
</body>
</html>
