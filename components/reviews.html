<section class="reviews-section">
  <h2 class="reviews-title">Lo que dicen nuestros +6,500 clientes satisfechos</h2>

  <!-- Contenedor scrolleable con fondo blanco -->
  <div class="reviews-scroll-container">
    <div class="reviews-container" id="reviewsContainer">
      <!-- Las reseñas se generarán dinámicamente aquí -->
    </div>
  </div>

  <!-- Contador de reseñas -->
  <div class="reviews-counter">
    <span id="reviewsCount">0</span> / 6,547 reseñas cargadas
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Base de datos de reseñas
  const reviewsBase = [
    {
      name: "María González",
      avatar: "M",
      product: "ropa.jpg",
      productAlt: "Proveedor de ropa",
      content: "¡Excelente servicio! Encontré justo lo que buscaba con este proveedor. La calidad es increíble y los precios son muy competitivos.",
      date: "Hace 2 días"
    },
    {
      name: "Alejandro Ruiz",
      avatar: "A",
      product: "vapers.jpg",
      productAlt: "Proveedor vapers",
      content: "Estoy muy contento con el proveedor de vapers. Productos de calidad y envío rápido. ¡Recomendado!",
      date: "Hace 1 semana"
    },
    {
      name: "Laura Martín",
      avatar: "L",
      product: "zapas.jpg",
      productAlt: "Proveedor zapas",
      content: "¡Las zapatillas son geniales! Muy buena calidad y los diseños son espectaculares. Sin duda, volveré a comprar.",
      date: "Hace 3 días"
    },
    {
      name: "Carlos Jiménez",
      avatar: "C",
      product: "ropa_vintage.jpg",
      productAlt: "Proveedor ropa vintage",
      content: "La ropa vintage es increíble! Encontré piezas únicas y en perfecto estado. Muy buen proveedor.",
      date: "Hace 5 días"
    },
    {
      name: "Sofia Ramírez",
      avatar: "S",
      product: "facturas.jpg",
      productAlt: "Proveedor facturas editables",
      content: "El proveedor de facturas editables es muy útil para mi negocio. Servicio rápido y eficiente.",
      date: "Hace 1 semana"
    },
    {
      name: "Diego Torres",
      avatar: "D",
      product: "futbol.jpg",
      productAlt: "Proveedor fútbol",
      content: "Los artículos de fútbol son de excelente calidad. Muy contento con mi compra.",
      date: "Hace 4 días"
    },
    {
      name: "Ana Morales",
      avatar: "A",
      product: "relojes.jpg",
      productAlt: "Proveedor relojes",
      content: "Los relojes son muy bonitos y de buena calidad. Estoy muy satisfecha con mi compra.",
      date: "Hace 6 días"
    },
    {
      name: "Roberto Silva",
      avatar: "R",
      product: "accesorios.jpg",
      productAlt: "Proveedor accesorios",
      content: "Los accesorios son muy variados y de buena calidad. Encontré justo lo que necesitaba.",
      date: "Hace 2 semanas"
    },
    {
      name: "Patricia López",
      avatar: "P",
      product: "electronica.jpg",
      productAlt: "Proveedor electrónica",
      content: "Los productos de electrónica son de excelente calidad. Envío rápido y seguro. Recomiendo este proveedor.",
      date: "Hace 1 día"
    },
    {
      name: "Fernando Castro",
      avatar: "F",
      product: "tickets.jpg",
      productAlt: "Proveedor tickets",
      content: "El proveedor de tickets es muy confiable y ofrece un excelente servicio. Muy útil para mi negocio.",
      date: "Hace 3 días"
    },
        {
      name: "Isabel Vega",
      avatar: "I",
      product: "perfumes.jpg",
      productAlt: "Proveedor perfumes",
      content: "Los perfumes son originales y tienen una excelente fijación. Muy satisfecha con mi compra.",
      date: "Hace 5 días"
    },
    {
      name: "Manuel Pérez",
      avatar: "M",
      product: "pack.jpg",
      productAlt: "Pack completo de todos los proveedores",
      content: "El pack completo es la mejor inversión. Tengo acceso a todos los proveedores y los precios son increíbles.",
      date: "Hace 1 semana"
    },
     {
      name: "Daniel Serrano",
      avatar: "D",
      product: "aleatorios.jpg",
      productAlt: "Pack aleatorio de varios proveedores",
      content: "Me encantó el pack aleatorio! Descubrí proveedores que no conocía y que son muy útiles para mi negocio.",
      date: "Hace 1 semana"
    }
  ];

  // Nombres adicionales para variar
  const additionalNames = [
    "José Hernández", "Carmen Vega", "Miguel Ángel", "Isabel Romero", "Antonio García",
    "Lucía Fernández", "Javier Muñoz", "Elena Ramos", "Ricardo Ortiz", "Beatriz Moreno",
    "Pablo Delgado", "Mónica Jiménez", "Sergio López", "Cristina Martín", "Andrés Ruiz",
    "Natalia Torres", "Raúl Sánchez", "Pilar González", "Alberto Díaz", "Remedios Gil"
  ];

  const timeVariations = [
    "Hace 1 hora", "Hace 3 horas", "Hace 1 día", "Hace 2 días", "Hace 3 días",
    "Hace 4 días", "Hace 5 días", "Hace 6 días", "Hace 1 semana", "Hace 2 semanas",
    "Hace 3 semanas", "Hace 1 mes", "Hace 2 meses"
  ];

  let reviewsContainer = document.getElementById('reviewsContainer');
  let reviewsCount = document.getElementById('reviewsCount');
  let currentCount = 0;
  let isLoading = false;

  // Función para generar una reseña
  function generateReview(baseReview, index) {
    // Variar el nombre ocasionalmente
    let reviewName = baseReview.name;
    if (Math.random() > 0.7) {
      reviewName = additionalNames[Math.floor(Math.random() * additionalNames.length)];
    }

    // Variar la fecha
    const randomDate = timeVariations[Math.floor(Math.random() * timeVariations.length)];

    return `
      <div class="review-card">
        <div class="review-header">
          <div class="user-info">
            <div class="user-avatar">${reviewName.charAt(0)}</div>
            <div class="user-details">
              <h4 class="user-name">${reviewName}</h4>
              <div class="stars">
                <span class="star">⭐</span>
                <span class="star">⭐</span>
                <span class="star">⭐</span>
                <span class="star">⭐</span>
                <span class="star">⭐</span>
              </div>
            </div>
          </div>
          <div class="product-purchased">
            <img src="assets/${baseReview.product}" alt="${baseReview.productAlt}" class="product-image">
          </div>
        </div>
        <div class="review-content">
          <p>"${baseReview.content}"</p>
        </div>
        <div class="review-date">${randomDate}</div>
      </div>
    `;
  }

  // Función para cargar más reseñas
  function loadMoreReviews(count = 50) {
    if (isLoading) return;
    isLoading = true;

    // Simular un pequeño delay de carga
    setTimeout(() => {
      let html = ''; // Acumular el HTML en una variable
      for (let i = 0; i < count; i++) {
        const baseIndex = currentCount % reviewsBase.length;
        const reviewHtml = generateReview(reviewsBase[baseIndex], currentCount);
        html += reviewHtml;  // Concatenar el HTML de la reseña
        currentCount++;

        // Limitar a 6547 reseñas como máximo
        if (currentCount >= 6547) break;
      }

      reviewsContainer.innerHTML += html; // Agregar todo el HTML al DOM de una vez
      reviewsCount.textContent = currentCount;
      isLoading = false;
    }, 100);
  }

  // Cargar las primeras reseñas
  loadMoreReviews(100);

  // Scroll infinito
  const scrollContainer = document.querySelector('.reviews-scroll-container');
  scrollContainer.addEventListener('scroll', function() {
    if (scrollContainer.scrollTop + scrollContainer.clientHeight >= scrollContainer.scrollHeight - 100) {
      if (currentCount < 6547) {
        loadMoreReviews(50);
      }
    }
  });
});
</script>
